<script type="text/html" id="gainDetail">
    <form method="post" onsubmit="return false;" action="" onclick="if(event.target === this){$('#modalBackdropBox').hide();$('#modalBackdropBox').html('');}" style="display:flex;flex-direction: row;width: 100%;align-items: center;justify-content: center;height:100%;">
        {{?ljk.detail.status===0}}
        <input type="hidden" name="action" value="auditGain" />
        {{??ljk.detail.status===1}}
        <input type="hidden" name="action" value="adjustGain" />
        {{?}}
        <input type="hidden" name="dgnid" value="{{=ljk.detail.id}}" />
        <div style="display:flex;flex-direction: column;width: 95%;padding: 10px;align-items: center;background: #fff;height: calc(90% - 0px);position: relative;">
            <div style="height:35px;display:flex;position: relative;width: 100%;flex-direction: row;align-items: center;justify-content: center;background:#00f;color:#fff;">
                <h4 style="text-align:center;">申请单操作</h4>
                <div style="position:absolute;top:0px;right:0px;" class="modal-close"><i class="fa fa-close fa-2x" style="color:#fff;"></i></div>
            </div>
            <div style="position: relative;width: 100%;height: calc(100% - 65px);">
                <div style="position: absolute;height: 100%;width: 100%;overflow-y:scroll;">
                    <div style="margin:0px auto;display:flex;flex-direction: column;width: 100%;font-size:14px;">
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;">
                            <div style="text-align: left;padding-left: 10px;width: 70%;font-weight: bold;">{{=ljk.detail.number }}</div>
                            <div style="width: 30%;">
                                {{?ljk.detail.status===-1}}<span style="color:red;">{{=ljk.detail.sts}}</span>{{??ljk.detail.status===0}}<span style="color:blue;">{{=ljk.detail.sts}}</span>{{??ljk.detail.status===1}}<span style="color:green;">{{=ljk.detail.sts}}</span>{{?}}
                            </div>
                        </div>
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;">
                            <div style="text-align: right;width: 60px;">申请人</div>
                            <div style="width: calc(100% - 70px);border-left:1px solid #cee;">
                                {{=ljk.detail.apRealname}}<span style="color:red;">【{{=ljk.detail.applyDt}}】</span>
                            </div>
                        </div>
                        {{?ljk.detail.status!==0}}
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;">
                            <div style="text-align: right;width: 60px;">审核人</div>
                            <div style="width: calc(100% - 70px);border-left:1px solid #cee;">
                                {{=ljk.detail.auRealname}}<span style="color:red;">【{{=ljk.detail.auditDt}}】</span>
                            </div>
                        </div>
                        {{?}}
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;;">
                            <div style="text-align: right;width: 60px;">配送信息</div>
                            <div style="width: calc(100% - 70px);justify-content: space-between;border-left:1px solid #cee;display: flex;flex-direction:row;flex-wrap: nowrap;">
                                <div style="width:25%;">人数:{{=ljk.detail.mnum}}人</div>
                                <div style="width:45%;">距离:<span style="color:{{=ljk.detail.clr}};">{{=ljk.detail.dst}}{{=ljk.detail.dw}}</span></div>
                            </div>
                        </div>
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;;">
                            <div style="text-align: right;width: 60px;">定位地址</div>
                            <div style="width: calc(100% - 70px);justify-content: space-between;border-left:1px solid #cee;display: flex;flex-direction:row;flex-wrap: nowrap;">
                                {{=ljk.detail.saddress}}
                            </div>
                        </div>
                        <div style="margin:2px 0px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-top:1px solid #cee;;">
                            <div style="text-align: right;width: 60px;">收货地址</div>
                            <div style="width: calc(100% - 70px);justify-content: space-between;border-left:1px solid #cee;display: flex;flex-direction:row;flex-wrap: nowrap;">
                                {{=ljk.detail.shaddr}}
                            </div>
                        </div>
                        {{?ljk.detail.dggs && ljk.detail.dggs.length}}
                        <div style="height:35px;line-height: 35px;color:white;background: #00f;text-align: center;font-size:16px;">提成商品信息<span style="color:white;">【合计：¥{{=ljk.detail.total}}】</span></div>
                        <div style="display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;height:30px;border:1px solid #000;">
                            <div style="width:30%;height: 100%;text-align: center;border-right: 1px solid #000;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>商品名称</span></div>
                            <div style="width:23%;height: 100%;text-align: center;border-right: 1px solid #000;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>提成金额</span></div>
                            <div style="width:23%;height: 100%;text-align: center;border-right: 1px solid #000;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>提成数量</span></div>
                            <div style="width:24%;height: 100%;text-align: center;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>原始数量</span></div>
                        </div>
                        {{for(var dgg in ljk.detail.dggs){}}
                        <div style="{{?dgg%2}}background:rgba(240,230,255,0.6);{{??}}background:#fff;{{?}}display: flex;flex-direction: column;border: 1px solid #cee;margin:3px 0px;">
                            <div style="display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;height:24px;">
                                <div style="width:30%;height: 100%;text-align: center;border-right: 1px solid #cee;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>{{=ljk.detail.dggs[dgg].goodsName}}</span></div>
                                <div style="width:23%;height: 100%;text-align: center;border-right: 1px solid #cee;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;">¥<span style="color:red;">{{=ljk.detail.dggs[dgg].total}}</span></div>
                                <div style="width:23%;height: 100%;text-align: center;border-right: 1px solid #cee;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;"><span>{{=ljk.detail.dggs[dgg].cnum}}{{=ljk.detail.dggs[dgg].unit}}</span></div>
                                <div style="width:24%;height: 100%;text-align: center;display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: center;">
                                    {{for(var xx in ljk.detail.dggs[dgg].onum){}}
                                    {{=ljk.detail.dggs[dgg].onum[xx][0]}}{{=ljk.detail.dggs[dgg].onum[xx][1]}}
                                    {{}}}
                                </div>
                            </div>
                        </div>
                        {{}}}
                        {{?}}
                    </div>
                    {{?ljk.detail.m && ljk.detail.m.length && ljk.detail.status!==-1}}
                    <div style="display: flex;flex-direction:column;">
                        <div style="height:30px;line-height: 30px;color:white;background: #00f;text-align: center;font-size:16px;">成员提成信息</div>
                        <div style="padding:5px 20px;display: flex;flex-direction: row;flex-wrap: wrap;align-items: center;border:1px solid #000;">
                            {{for(var dguitem in ljk.detail.m){}}
                            <div style="display: flex;flex-direction: row;height: 30px;flex-wrap: nowrap;margin: 2px;">
                                {{?(ljk.detail.m[dguitem].type == 0 )}}
                                <label style="cursor:pointer;white-space:nowrap;display:inline-block;background: #1a7bb9;padding:2px;color: white;border-radius:3px;">
                                    {{=ljk.detail.m[dguitem].t_name}}
                                    {{?(ljk.detail.m[dguitem].leader == 1)}}
                                    【<span style="color:yellow;">组长</span>】
                                    {{?}}
                                </label>
                                {{??}}
                                <label style="cursor:pointer;white-space:nowrap;display:inline-block;background: #23c6c8;padding:2px;color: white;border-radius:3px;">{{=ljk.detail.m[dguitem].t_name}}</label>
                                {{?}}
                                <input type="hidden" name="dguitem[]" value="{{=dguitem}}" />
                                <input type="hidden" name="id[{{=dguitem}}]" value="{{?ljk.detail.m[dguitem].id}}{{=ljk.detail.m[dguitem].id}}{{??}}0{{?}}" />
                                <input type="hidden" name="type[{{=dguitem}}]" value="{{=ljk.detail.m[dguitem].type}}" />
                                <input type="hidden" name="tguid[{{=dguitem}}]" value="{{=ljk.detail.m[dguitem].t_guid}}" />
                                <input type="hidden" name="tname[{{=dguitem}}]" value="{{=ljk.detail.m[dguitem].t_name}}" />
                                <input type="text" name="total[{{=dguitem}}]" onblur="adjustGain(this);" data-value="{{?ljk.detail.m[dguitem].total}}{{=ljk.detail.m[dguitem].total}}{{??}}0.00{{?}}" style="text-align: center;width:60px;height: 29px;border: 0;outline: 0; border-bottom: 1px solid #ccc;" value="{{?ljk.detail.m[dguitem].total}}{{=ljk.detail.m[dguitem].total}}{{??}}0.00{{?}}" />
                            </div>
                            {{}}}
                        </div>
                    </div>
                    {{?}}
                    <div style="margin:2px 0px;height: 30px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border:1px solid #000;">
                        <div style="text-align: right;width: 60px;height:100%;line-height: 30px;">调整金额¥</div>
                        <div style="width: calc(100% - 70px);height:100%;border-left:1px solid #000;line-height: 30px;">
                            <input type="text" name="adJustTotal" style="border:0;outline:0;height: 90%;cursor: not-allowed;width: 100%;color:red;background:#fff;" disabled="disabled" data-value="{{?ljk.detail.adjust}}{{=ljk.detail.adjust}}{{??}}0.00{{?}}" value="{{?ljk.detail.adjust}}{{=ljk.detail.adjust}}{{??}}0.00{{?}}" readonly="readonly" />
                        </div>
                    </div>
                    {{?ljk.detail.status === 0}}
                    <div style="margin:2px 0px;height: 30px;justify-content: space-between;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border:1px solid #000;">
                        <div style="text-align: right;width: 60px;height:100%;line-height: 30px;">审核意见</div>
                        <div style="display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;width: calc(100% - 70px);height:100%;border-left:1px solid #000;cursor: not-allowed;line-height: 30px;">
                            <label onclick="$(this).children('i').addClass('fa-check-circle').removeClass('fa-circle');$(this).siblings('label').children('i').addClass('fa-circle').removeClass('fa-check-circle');" style="margin:0;margin-left: 10px;height: 100%;width:100px;cursor: pointer;display: flex;flex-direction: row;align-items: center;"><i class="fa fa-check-circle fa-2x" style="color:#1ab394;"></i><input style="opacity: 0;width:0px;height:0px;margin-left: 5px;" type="radio" name="status" value="1" checked="checked" />通过</label><label onclick="$(this).children('i').addClass('fa-check-circle').removeClass('fa-circle');$(this).siblings('label').children('i').addClass('fa-circle').removeClass('fa-check-circle');" style="margin:0;margin-left: 10px;height: 100%;width:100px;cursor: pointer;display: flex;flex-direction: row;align-items: center;"><i class="fa fa-circle fa-2x" style="color:#1ab394"></i><input style="width: 0px;height:0px;margin-left: 5px;opacity: 0;" type="radio" name="status" value="-1" />不通过</label>
                        </div>
                    </div>
                    {{?}}
                </div>
            </div>
            <div style="display: flex;flex-direction: row;flex-wrap: nowrap;align-items: center;justify-content: flex-end;padding: 0px 20px;height:30px;">
                <a href="javascript:void(0);" class="btn btn-sm btn-warning modal-close" style="margin-right:15px;">关闭</a>
                {{?ljk.detail.status===0}}
                <input type="submit" name="authDpgSubmit" value="审核" class="btn btn-sm btn-success" onclick="return formAct2(this.form,'','正在进行审核操作，请稍后！');" />
                {{??ljk.detail.status===1}}
                <input type="submit" name="authDpgSubmit" value="调整" class="btn btn-sm btn-success" onclick="return formAct2(this.form,'','正在进行调整操作，请稍后！');" />
                {{?}}
            </div>
        </div>
    </form>
</script>